"0","matched_data_subset <- matched_data_subset %>% "
"0","  mutate(change_to_white = case_when("
"0","    census_race != 1 & race_first == 1 ~ 1,"
"0","    TRUE ~ 0"
"0","  )) %>% "
"0","     mutate(change_from_white = case_when("
"0","    census_race == 1 &  race_first != 1 ~ 1,"
"0","    TRUE ~ 0"
"0","  )) "
"0",""
"0","## run education models "
"0","education_coefficients <- matched_data_subset %>%"
"0","  mutate(race = case_when("
"0","    census_race == 1  ~ ""White"","
"0","    census_race == 2  ~ ""Black"","
"0","  )) %>% "
"0","  filter(race %in% c(""Black"")) %>% "
"0","  filter(byear %in% 1901:1927) %>% "
"0","  filter(AGE >= 18) %>% "
"0","  group_by(race) %>%"
"0","  do(tidy(glm(change_to_white ~ educ.yrs + sex + as.factor(byear), family = ""binomial"", data = .))) %>% "
"0","  filter(term %in% c(""educ.yrs"")) %>% "
"0","  mutate(estimate_odds = exp(estimate),"
"0","         low = exp(estimate - 1.96*std.error),"
"0","         upper = exp(estimate + 1.96*std.error))"
"0",""
"0","## education coefficients "
"0","education_coefficients %>% "
"0","  ggplot() + "
"0","  geom_pointrange(aes(x = race, y = estimate_odds, ymin = low, ymax = upper)) + "
"0","  theme_minimal(20) + "
"0","  geom_hline(yintercept = 1, linetype = ""dashed"") + "
"0","  coord_flip()"
